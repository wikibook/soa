<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XMLSPY v5 rel. 4 U (http://www.xmlspy.com)-->
<adaptiveMap xmlns:test="http://javector.com/ser/adaptive/po"  xmlns="http://javector.com/ser/adaptive"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<strategy javaClass="com.javector.ser.adaptive.po.MyItem" xmlType="test:item" xmlName="test:item">
		<rule javaName="name" xmlName="test:productName"  xmlType="xs:string"  xmlNodeType="ATTRIBUTE"/>

        <rule javaName="amount" xmlName="test:quantity"  xmlType="xs:positiveInteger"  xmlNodeType="ELEMENT">

        </rule>
        <rule javaName="price" xmlName="test:price"  xmlType="xs:double" xmlNodeType="ELEMENT">

        </rule>
    </strategy>
	<strategy javaClass="com.javector.ser.adaptive.po.Address" xmlType="test:billToType" xmlName="test:billTo">
		<rule javaName="." xmlName="test:street"  xmlType = "xs:string" xmlNodeType="ELEMENT" restrictTo="SERIALIZATION">
			<script><![CDATA[return source.getStreetNum()+" "+source.getStreetName();]]></script>
		</rule>
		<rule javaName="streetNum" javaClass="int" xmlName="test:street" xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">
			<script><![CDATA[substring-before(.,' ')]]></script>
		</rule>
		<rule javaName="streetName" javaClass="java.lang.String" xmlName="test:street" xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">
			<script><![CDATA[substring-after(.,' ')]]></script>
		</rule>
		<rule javaName="city" xmlName="test:city" xmlType="xs:string" xmlNodeType="ELEMENT"/>
		<rule javaName="state" xmlName="test:state" xmlType="xs:string" xmlNodeType="ELEMENT"/>
		<rule javaName="zip" xmlName="test:zip" xmlType="xs:string" xmlNodeType="ELEMENT"/>
		<rule javaName="phoneNumber" javaClass="com.javector.ser.adaptive.po.Phone" xmlName="test:phone" xmlType="xs:string"  xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">

        </rule>
        <rule javaName="phoneNumber" xmlName="test:phone" xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="SERIALIZATION">

            <script><![CDATA[String area = Integer.toString(source.getAreaCode());return "("+area+")"+" "+source.getExchange()+"-"+source.getNumber();]]></script>
		</rule>
	</strategy>
	<strategy javaClass="com.javector.ser.adaptive.po.Phone" xmlType="xs:string">
		<rule javaName="areaCode"  xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">
            <!--no need for namespace since complex xpath evaluation will be handled by wrap-->
            <script><![CDATA[substring-before(substring-after(.,'('),')')]]></script>
		</rule>
		<rule javaName="exchange"  xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">
		    <script><![CDATA[substring-before(substring-after(.,' '),'-')]]></script>
		</rule>
		<rule javaName="number"  xmlType="xs:string" xmlNodeType="ELEMENT" restrictTo="DESERIALIZATION">
		    <script><![CDATA[substring-after(.,'-')]]></script>
		</rule>
	</strategy>
    <strategy javaClass="com.javector.ser.adaptive.po.MyPurchaseOrder" xmlType="test:PurchaseOrder" xmlName="test:PurchaseOrder">
        <rule javaName="billTo" xmlName="test:billTo" xmlType="test:billToType" xmlNodeType="ELEMENT" javaClass="com.javector.ser.adaptive.po.Address"/>
        <rule javaName="items" xmlName="test:item" xmlType="test:item" xmlNodeType="ELEMENT" javaClass="com.javector.ser.adaptive.po.MyItem">
            <wrap>
                <javaWrap name="items" type = "[Lcom.javector.ser.adaptive.po.MyItem;"/>
                <!--xml wrap names should be seperated by # and given local names only -->
                <xmlWrap name="items" type="items"/>
                <!--<xmlWrap name="items#bagItem" type="items#bagItem"/>-->
            </wrap>
        </rule>
	</strategy>
</adaptiveMap>
